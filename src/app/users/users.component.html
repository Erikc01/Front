<div class="container">
	<div class="row section-pages">
		<div class="col m12" >
			<h1 align="center" class="h1-titulo">MIS AUTOS</h1>
		</div>
	</div>
</div>

<div class="container">
	<div class="row" style="padding-top: 30px; padding-bottom: 30px;">
		<div class="col s12 m3">
			<div class="card" style="width: 300px; height: 400px; border-radius: 0px; box-shadow: 5px 5px rgba(33,33,33,.2);">
			    <div class="card-image waves-effect waves-block waves-light">
			      <img class="activator" src="images/office.jpg">
			    </div>
			    <div class="card-content">
			      	<span class="card-title" style="text-align:center; font-size:14px;">Card Title</span>
			    	<h5 style="text-align:center; font-size:14px;">Placas: {{car.plates}}</h5>
		        	<h5 style="text-align:center; font-size:14px;">Año: {{car.year}}</h5>
	        		<br>
			        <h5 style="text-align:center; font-size:14px;">VIN: {{car.vin}}</h5>
			        <h5 style="text-align:center; font-size:14px;">IMEI: {{car.policy.get_assigned_obd_imei}}</h5>
			        <br>
			        <h5 style="text-align:center; font-size:14px;">No PÓLIZA: {{car.policy.policy_number}}</h5>
			        <h5 style="text-align:center; font-size:14px;">No Folio: {{car.policy.aig_id}}</h5>
			        <div *ngFor="let car_id of cars" style="top: 50%;left: 104%; position: absolute; cursor: pointer;">
						<!-- <span (click)="reload_car_data(car_id)" style="border: 1px solid #737171; border-radius: 50%;width: 30px;height: 30px;padding: 0px 9px;font-size: 19px; cursor:pointer;"  *ngIf="id != car_id"> > </span> -->
						<!-- <span *ngIf="id != car_id" (click)="reload_car_data(car_id)"><i class="fa fa-angle-right fa-2x" aria-hidden="true"></i></span> -->
					</div>
					<div *ngFor="let car_id of cars" style="top: 50%;right: 104%;position: absolute; cursor: pointer;">
						<!-- <span *ngIf="id != car_id" (click)="reload_car_data(car_id)"><i class="fa fa-angle-left fa-2x" aria-hidden="true"></i></span -->>
						<!-- <span (click)="reload_car_data(car_id)" style="border: 1px solid #737171; border-radius: 100px; width: 30px; height: 30px;padding: 0px 9px;font-size: 19px; cursor:pointer;"  *ngIf="id != car_id"> < </span> -->
					</div>
					<br>
					<br>
			    </div>
			</div>
		</div>
		<div class="col s12 m9 push-m1">
		    <div class="col s12">
		      <ul class="tabs">
		        <li class="tab "><a class="active" href="#detalles">DETALLES</a></li>
		        <li class="tab "><a href="#certificado">CERTIFICADO</a></li>
		        <li class="tab "><a href="#mi_auto">MI AUTO</a></li>
		        <li class="tab "><a href="#transacciones">TRANSACCIONES</a></li>
		        <li class="tab "><a href="#viajes">VIAJES</a></li>
		        <li class="tab "><a href="#recargas">RECARGAS</a></li>
		      </ul>
		    </div>

		    <!-- TAB DETALLES -->
		    <div id="detalles" class="col s12"></div>
		    <!-- FIN DETALLES -->

		    <!-- TAB CERTIFICADO -->
		    <div id="certificado" class="col s12">
				<div class="row" style="padding-top: 40px;">
					<div class="col s1"></div>
				    <div class="col s5">
						<div class="card" style="border: none;">
							<div class="card-content white-text">
							 	<p class="align-p-center"> Status</p>
								<p class="align-p-center-green"></p>
								<br>
								<p class="align-p-center">Fecha:</p>
								<p class="align-p-center">Próxima renovación - </p>
								<br>
								<p class="align-p-center" style="padding:0px 10px;">Consulta las condiciones de tu seguro <a href="https://www.aig.com.mx/content/dam/aig/lac/mexico/documents/brochures/2017_condiciones_seguro_por_kilometro..pdf" target="_blank" style="text-decoration:underline; color:#17d320; cursor:pointer;">aquí</a> </p>
								<br>
								<a href="http://192.168.15.219:3000/polizas/certificado?policy_token={{car.policy.policy_token}}&identifier={{car.policy.user_id}}" target="_blank" class="btn btn-green" style="height:auto; position: relative; left: 30px;">Descargar póliza</a>
							</div>
						</div>
				    </div>
				</div>
		    </div>
		    <!-- FIN CERTIFICADO -->

		    <!-- TAB MI AUTO -->
		    <div id="mi_auto" class="col s12">
		    	
		    </div>
		    <!-- FIN MI AUTO -->

		    <!-- TAB TRANSACIONES -->
		    <div id="transacciones" class="col s12">
		    	<div class="row" style="padding-top: 40px;">
					<div class="col s12">
						<p class="align-p-center">RECARGA DE KILOMETROS</p>
						<table class="table">
						  <thead>
						    <tr>
						      <th scope="col">Fecha</th>
						      <th scope="col">Movimiento</th>
						      <th scope="col">Monto</th>
						      <th scope="col"></th>
						    </tr>
						  </thead>
						  <tbody>
						    <tr *ngFor="let purchase of purchases | paginate: { id:'recharge', itemsPerPage: 1, currentPage: q }">
						      <td>{{purchase.created_at | date:'dd/MM/yyyy'}}</td>
						      <td>{{purchase.kilometers}} kilometros</td>
						      <td>${{purchase.cost}}</td>
						    </tr>
							<pagination-controls style="width:100%; margin-left:50%;" (pageChange)="q = $event" id="recharge" autoHide="true"
							previousLabel="Anterior"
							nextLabel="Siguiente"
							screenReaderPaginationLabel="Pagination"
							screenReaderPageLabel="page"
							screenReaderCurrentLabel="Actual"> </pagination-controls>
						  </tbody>
						</table>
					</div>
				</div>
				<div class="col s12">
					<p class="align-p-center">PAGO DE MENSUALIDADES</p>
					<table class="table">
						<thead>
							<tr>
								<th scope="col">Fecha </th>
								<th scope="col">Movimiento</th>
								<th scope="col">Monto</th>
							</tr>
						</thead>
						<tbody>
							<tr *ngFor="let monthly of car.policy.get_monthly_payments | paginate: { id:'month', itemsPerPage: 2, currentPage: p }">
								<td>{{monthly.paid_at_date | date:'dd/MM/yyyy'}}</td>
								<td>Pago de Membresia</td>
								<td>${{monthly.amount}}</td>
							</tr>
						</tbody>
					</table>

					<pagination-controls (pageChange)="p = $event" id="month" directionLinks="true" autoHide="true" previousLabel="Anterior" nextLabel="Siguiente" screenReaderPaginationLabel="Pagination" screenReaderPageLabel="page" screenReaderCurrentLabel="Actual" > 
					</pagination-controls>
				</div>
		    </div>
		    <!-- FIN TRANSACCIONES -->

		    <!-- TAB VIAJES -->
		    <div id="viajes" class="col s12">
		    	
		    </div>
		    <!-- FIN VIAJES -->

		    <!-- TAB RECARGAR -->
		    <div id="recargas" class="col s12">
				<div class="row choose-package" style="padding-top: 40px;">
					<div class="col-md-1"></div>
					<div class="col-md-2">
						<div class="container">
							<div class="row">
							    <div class="col s12 m6">
									<div class="card" style="width: 40%; height: 40%;">
										<div class="card-title">
									  		<p class="align-p-center">250 KM</p>
									  		<hr>
										</div>
										<div class="card-content white-text">
										  	<p class="align-p-center"> Un pago de </p>
										</div>
										<div class="card-title">
										  	<hr>
										  	<p class="align-p-center">250 KM</p>
										</div>
									</div>
							    </div>
							</div>
						</div>
					</div>
					<div class="col-md-12">
						<br>
						<button type="button" class="btn btn-green" style="height:auto; margin-top:30px; width:50%; margin-left:25%;" (click)="process_purchase_km()">RECARGA</button>
					</div>
				</div>
				<!-- <div class="row" *ngIf="choose_package == false && choose_method_pay == true">
					<div  class="col-md-12">
						<div class="row">
							<div class="col-md-4">
							 <label class="border {{forma_pago=='tarjeta' ? 'btn-forma-pago-active':'btn-forma-pago'}} align-middle" style="padding-top: 10px;" (click)="cambiarFormaPago('tarjeta')">
								 Tarjeta de <br>crédito o débito
							 </label>
							</div>
							<div class="col-md-4">
							 <label class="border {{forma_pago=='efectivo' ? 'btn-forma-pago-active':'btn-forma-pago'}} align-middle" (click)="cambiarFormaPago('efectivo')">
								 Centros de pago
							 </label>
							</div>
							<div class="col-md-4">
							 <label class="border {{forma_pago=='spei' ? 'btn-forma-pago-active':'btn-forma-pago'}} align-middle" (click)="cambiarFormaPago('spei')">
								 SPEI
							 </label>
							</div>
						</div>
				 	</div>
				 	<div *ngIf="forma_pago=='tarjeta'" class="col-md-12">
						<div class="row">
						 	<div class="col-md-6 space-input">
							 	<label for="card" style="" class="label-input">Número de tarjeta</label>
							 	<div class="input-group">
								 	<input type="text" class="form-control {{error_card==''? '':'invalid border-danger'}}" [(ngModel)]="card" name="card" id="card">
							 	</div>
							 	<label *ngIf="error_card!=''" for="card" class="invalid">{{error_card}}</label>
						 	</div>
						</div>
					 	<div class="row">
						 	<div class="col-md-6 space-input">
							 	<label for="card_name" style="" class="label-input">Nombre como aparece en la tarjeta</label>
							 	<div class="input-group">
									<input type="text" class="form-control {{error_card_name==''? '':'invalid border-danger'}}" [(ngModel)]="card_name" name="card_name" id="card_name">
							 	</div>
								<label *ngIf="error_card_name!=''" for="card_name" class="invalid">{{error_card_name}}</label>
						 	</div>
					 	</div>
					 	<div class="row">
						 	<div class="col-md-4">
							 	<div class="row">
								 	<div class="col-md-12">
									 	<label for="expiration_month" style="" class="label-input">Vencimiento</label>
								 	</div>
								 	<div class="col-md-6 space-input">
									 	<div class="input-group">
										 	<select class="form-control {{error_expiration==''? '':'invalid border-danger'}}" name="expiration_month" id="expiration_month" [(ngModel)]="expiration_month">
											 	<option value="" selected>MM</option>
												<option value="01">01</option>
												<option value="02">02</option>
												<option value="03">03</option>
												<option value="04">04</option>
												<option value="05">05</option>
												<option value="06">06</option>
												<option value="07">07</option>
												<option value="08">08</option>
												<option value="09">09</option>
												<option value="10">10</option>
												<option value="11">11</option>
												<option value="12">12</option>
										 	</select>
									 	</div>
								 	</div>
								 	<div class="col-md-6 space-input">
									 	<div class="input-group">
											<select class="form-control {{error_expiration==''? '':'invalid border-danger'}}" name="expiration_year" id="expiration_year" [(ngModel)]="expiration_year">
												<option value="">YY</option>
												<option value="18">18</option>
												<option value="19">19</option>
												<option value="20">20</option>
												<option value="21">21</option>
												<option value="22">22</option>
												<option value="23">23</option>
												<option value="24">24</option>
												<option value="25">25</option>
												<option value="26">26</option>
												<option value="27">27</option>
												<option value="28">28</option>
												<option value="29">29</option>
												<option value="30">30</option>
											</select>
									 	</div>
								 	</div>
									<div class="col-md-12">
										<label *ngIf="error_expiration!=''" for="expiration_month" class="invalid">{{error_expiration}}</label>
									</div>
							 	</div>
						 	</div>
						 	<div class="col-md-2 space-input">
							 	<label for="cvv" style="" class="label-input">CVV</label>
							 	<div class="input-group">
								 	<input type="text" class="form-control {{error_cvv==''? '':'invalid border-danger'}}" [(ngModel)]="cvv" name="cvv" id="cvv">
							 	</div>
								<label *ngIf="error_cvv!=''" for="cvv" class="invalid">{{error_cvv}}</label>
						 	</div>
					 	</div>
						<div class="row">
						 	<button type="button" class="btn btn-green floating-recharge" (click)="process_to_purchase()" style="margin-top:1%" >PAGAR RECARGA</button>
						</div>
				 	</div>
				 	<div *ngIf="forma_pago=='efectivo'" class="col-md-12">
						<div class="row">
						 	<div class="col-md-12">Selecciona tu lugar de pago:</div>
							<div class="col-md-12">
								<label *ngIf="error_tienda!=''" for="" class="invalid">{{error_tienda}}</label>
							</div>
							<div *ngFor="let tienda2 of tiendas" class="col-md-3">
								<label class="border {{tienda==tienda2.urlname ? 'tienda-active':''}}" align="center" style="padding:5px;width:100%;height: 60px;" (click)="setTienda(tienda2.urlname)">
									<img src="{{tienda2.urlfoto}}" alt="" class="img-fluid">
									<br>
								</label>
							</div>
						 	<div class="col-md-12">	
						 		<button type="button" class="btn btn-green floating-recharge" style="margin-top:1%" (click)="process_to_purchase()">GENERAR FICHA DE PAGO</button>
						 	</div>
					 	</div>
				 	</div>
				 	<div *ngIf="forma_pago=='spei'" class="col-md-12">
					 	<div class="row">
						 	<div class="col-md-12">
								<br><br>
							 	<img src="/assets/img/forma_pago/spei.png" alt="">
								<br><br><br>
								<span>
									Al hacer clic en "GENERAR REFERENCIA SPEI" recibirás las instrucciones para pagar con transferencia desde tu banco. Deberás realizarlo dentro de las próximas 24 horas para mantener tu cotización.
								</span>
								<div class="clearfix"></div>
								<br><br>
								<button type="button" class="btn btn-green floating-recharge" style="margin-top:1%" (click)="process_to_purchase()" >GENERAR REFERENCIA SPEI</button>
						 	</div>
					 	</div>
				 	</div>
				</div> -->
		    </div>
		    <!-- FIN RECARGAS -->
		</div>
	</div>
</div>